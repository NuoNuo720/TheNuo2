<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>可扩展的玩家意见调查问卷</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#4F46E5',
                        secondary: '#10B981',
                        accent: '#F59E0B',
                        danger: '#EF4444',
                        dark: '#1E293B',
                        game: { 50: '#EEF2FF', 100: '#E0E7FF' }
                    },
                    animation: {
                        'bounce-slow': 'bounce 3s infinite',
                        'fade-in': 'fadeIn 0.5s ease-out',
                        'shake': 'shake 0.3s ease-in-out'
                    },
                    keyframes: {
                        fadeIn: { '0%': { opacity: '0', transform: 'translateY(10px)' }, '100%': { opacity: '1', transform: 'translateY(0)' } },
                        shake: { '0%,100%': { transform: 'translateX(0)' }, '25%': { transform: 'translateX(-5px)' }, '75%': { transform: 'translateX(5px)' } }
                    }
                }
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto { content-visibility: auto; }
            .form-focus { @apply focus:ring-2 focus:ring-primary/50 focus:border-primary focus:outline-none; }
            .card-shadow { @apply shadow-lg hover:shadow-xl transition-all duration-300; }
            .radio-active { @apply border-primary bg-primary text-white; }
            .input-error { @apply border-danger focus:ring-danger/30 focus:border-danger !ring-2; }
            .error-text { @apply text-danger text-sm mt-1 flex items-center animate-fade-in; }
            .visually-hidden { @apply absolute w-0 h-0 opacity-0 pointer-events-none overflow-hidden; }
            .required-tag { @apply inline-block bg-danger/10 text-danger text-xs px-2 py-0.5 rounded ml-1; }
            .custom-option-group { @apply p-4 bg-slate-50 rounded-xl mt-4 border border-slate-200; } /* 新增选项组样式 */
        }
    </style>
</head>
<body class="bg-gradient-to-br from-game-50 to-game-100 min-h-screen font-sans text-dark">
    <div class="container mx-auto px-4 py-8 md:py-16 max-w-5xl">
        <header class="text-center mb-12 relative">
            <a href="indexdaohang.html" class="absolute left-0 top-0 md:top-4 text-slate-600 hover:text-primary transition-colors flex items-center group">
                <i class="fa fa-arrow-left mr-2 group-hover:translate-x-[-2px] transition-transform"></i>
                <span class="hidden sm:inline">返回首页</span>
            </a>
            
            <div class="inline-flex items-center justify-center mb-4">
                <i class="fa fa-gamepad text-primary text-4xl md:text-5xl mr-4 animate-bounce-slow"></i>
                <h1 class="text-[clamp(1.8rem,5vw,2.8rem)] font-bold text-dark tracking-tight">玩家意见调查问卷</h1>
            </div>
            
            <p class="text-slate-600 max-w-2xl mx-auto text-lg mb-2">
                分享你的想法，帮助半猫诺丷做得更好～
            </p>
            <p class="text-danger font-medium flex items-center justify-center">
                <i class="fa fa-exclamation-circle mr-2"></i> 带<span class="required-tag">必填</span>标识的项需填写
            </p>
        </header>
        
        <div class="bg-white rounded-2xl card-shadow p-6 md:p-8 mb-10 transform hover:-translate-y-1 transition-transform">
            <form id="surveyForm" class="space-y-8">
                <!-- 基本信息 -->
                <section class="space-y-5 pb-6 border-b border-slate-200 animate-fade-in">
                    <h2 class="text-xl font-semibold text-dark flex items-center">
                        <i class="fa fa-user-circle text-primary mr-2"></i>基本信息
                    </h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="space-y-1">
                            <label for="name" class="block text-sm font-medium text-slate-700">
                                游戏昵称 
                                <span class="required-tag">必填</span>
                            </label>
                            <input type="text" id="name" name="name" required
                                class="w-full px-4 py-2.5 border border-slate-300 rounded-lg form-focus transition duration-200"
                                placeholder="2-6个字的昵称">
                            <p id="nameError" class="error-text hidden">
                                <i class="fa fa-times-circle mr-1"></i> 昵称需2-6个字符
                            </p>
                        </div>
                        
                        <div class="space-y-1">
                            <label for="email" class="block text-sm font-medium text-slate-700">
                                联系邮箱（可选）
                            </label>
                            <input type="email" id="email" name="email"
                                class="w-full px-4 py-2.5 border border-slate-300 rounded-lg form-focus transition duration-200"
                                placeholder="用于回复你的建议">
                        </div>
                    </div>
                </section>
                
                <!-- 游戏体验评价（含新增选项） -->
                <section class="space-y-5 pb-6 border-b border-slate-200 animate-fade-in" style="animation-delay: 0.1s">
                    <h2 class="text-xl font-semibold text-dark flex items-center">
                        <i class="fa fa-star text-accent mr-2"></i>游戏体验评价
                    </h2>
                    
                    <!-- 原有：总体满意度 -->
                    <div class="space-y-2">
                        <label class="block text-sm font-medium text-slate-700">
                            总体满意度 
                            <span class="required-tag">必填</span>
                            <p id="satisfactionError" class="error-text hidden mt-1">
                                <i class="fa fa-times-circle mr-1"></i> 请选1-5分
                            </p>
                        </label>
                        <div id="satisfactionGroup" class="flex items-center space-x-2 sm:space-x-4">
                            <label class="inline-flex flex-col items-center cursor-pointer transition-all hover:scale-105">
                                <input type="radio" name="satisfaction" value="1" required class="visually-hidden peer" tabindex="0">
                                <span class="w-10 h-10 flex items-center justify-center rounded-full border-2 border-slate-300 peer-checked:radio-active transition-all mb-1"></span>
                                <span class="text-xs">1分</span>
                            </label>
                            <label class="inline-flex flex-col items-center cursor-pointer transition-all hover:scale-105">
                                <input type="radio" name="satisfaction" value="2" required class="visually-hidden peer" tabindex="0">
                                <span class="w-10 h-10 flex items-center justify-center rounded-full border-2 border-slate-300 peer-checked:radio-active transition-all mb-1"></span>
                                <span class="text-xs">2分</span>
                            </label>
                            <label class="inline-flex flex-col items-center cursor-pointer transition-all hover:scale-105">
                                <input type="radio" name="satisfaction" value="3" required class="visually-hidden peer" tabindex="0">
                                <span class="w-10 h-10 flex items-center justify-center rounded-full border-2 border-slate-300 peer-checked:radio-active transition-all mb-1"></span>
                                <span class="text-xs">3分</span>
                            </label>
                            <label class="inline-flex flex-col items-center cursor-pointer transition-all hover:scale-105">
                                <input type="radio" name="satisfaction" value="4" required class="visually-hidden peer" tabindex="0">
                                <span class="w-10 h-10 flex items-center justify-center rounded-full border-2 border-slate-300 peer-checked:radio-active transition-all mb-1"></span>
                                <span class="text-xs">4分</span>
                            </label>
                            <label class="inline-flex flex-col items-center cursor-pointer transition-all hover:scale-105">
                                <input type="radio" name="satisfaction" value="5" required class="visually-hidden peer" tabindex="0">
                                <span class="w-10 h-10 flex items-center justify-center rounded-full border-2 border-slate-300 peer-checked:radio-active transition-all mb-1"></span>
                                <span class="text-xs">5分</span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- 新增选项1：游戏难度评价（单选） -->
                    <div class="custom-option-group">
                        <h3 class="font-medium text-slate-800 mb-3 flex items-center">
                            <i class="fa fa-balance-scale text-primary mr-2"></i>自由电子冒险系列游戏难度评价
                        </h3>
                        <div class="flex flex-wrap gap-4">
                            <label class="inline-flex items-center cursor-pointer group">
                                <input type="radio" name="difficulty" value="too-easy" class="visually-hidden peer" tabindex="0">
                                <span class="w-5 h-5 border-2 border-slate-300 rounded-full mr-2 flex items-center justify-center peer-checked:border-primary group-hover:border-primary/70 transition-all"></span>
                                <span class="text-slate-700">太简单了</span>
                            </label>
                            <label class="inline-flex items-center cursor-pointer group">
                                <input type="radio" name="difficulty" value="easy" class="visually-hidden peer" tabindex="0">
                                <span class="w-5 h-5 border-2 border-slate-300 rounded-full mr-2 flex items-center justify-center peer-checked:border-primary group-hover:border-primary/70 transition-all"></span>
                                <span class="text-slate-700">偏简单</span>
                            </label>
                            <label class="inline-flex items-center cursor-pointer group">
                                <input type="radio" name="difficulty" value="balanced" class="visually-hidden peer" tabindex="0">
                                <span class="w-5 h-5 border-2 border-slate-300 rounded-full mr-2 flex items-center justify-center peer-checked:border-primary group-hover:border-primary/70 transition-all"></span>
                                <span class="text-slate-700">难度适中（推荐）</span>
                            </label>
                            <label class="inline-flex items-center cursor-pointer group">
                                <input type="radio" name="difficulty" value="hard" class="visually-hidden peer" tabindex="0">
                                <span class="w-5 h-5 border-2 border-slate-300 rounded-full mr-2 flex items-center justify-center peer-checked:border-primary group-hover:border-primary/70 transition-all"></span>
                                <span class="text-slate-700">偏难</span>
                            </label>
                            <label class="inline-flex items-center cursor-pointer group">
                                <input type="radio" name="difficulty" value="too-hard" class="visually-hidden peer" tabindex="0">
                                <span class="w-5 h-5 border-2 border-slate-300 rounded-full mr-2 flex items-center justify-center peer-checked:border-primary group-hover:border-primary/70 transition-all"></span>
                                <span class="text-slate-700">太难了</span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- 新增选项2：希望新增的功能（多选） -->
                    <div class="custom-option-group">
                        <h3 class="font-medium text-slate-800 mb-3 flex items-center">
                            <i class="fa fa-lightbulb-o text-primary mr-2"></i>希望新增的功能（可多选）
                        </h3>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                            <label class="inline-flex items-center cursor-pointer p-2 rounded-lg hover:bg-slate-50 transition-colors">
                                <input type="checkbox" name="newFeatures[]" value="multiplayer" class="w-4 h-4 text-primary form-focus rounded">
                                <span class="ml-2 text-slate-700">多人联机模式</span>
                            </label>
                            <label class="inline-flex items-center cursor-pointer p-2 rounded-lg hover:bg-slate-50 transition-colors">
                                <input type="checkbox" name="newFeatures[]" value="characters" class="w-4 h-4 text-primary form-focus rounded">
                                <span class="ml-2 text-slate-700">任务系统</span>
                            </label>
                            <label class="inline-flex items-center cursor-pointer p-2 rounded-lg hover:bg-slate-50 transition-colors">
                                <input type="checkbox" name="newFeatures[]" value="levels" class="w-4 h-4 text-primary form-focus rounded">
                                <span class="ml-2 text-slate-700">新游戏</span>
                            </label>
                            <label class="inline-flex items-center cursor-pointer p-2 rounded-lg hover:bg-slate-50 transition-colors">
                                <input type="checkbox" name="newFeatures[]" value="rewards" class="w-4 h-4 text-primary form-focus rounded">
                                <span class="ml-2 text-slate-700">每日签到奖励</span>
                            </label>
                            <label class="inline-flex items-center cursor-pointer p-2 rounded-lg hover:bg-slate-50 transition-colors">
                                <input type="checkbox" name="newFeatures[]" value="rewards" class="w-4 h-4 text-primary form-focus rounded">
                                <span class="ml-2 text-slate-700">积分商城</span>
                            </label>
                            <label class="inline-flex items-center cursor-pointer p-2 rounded-lg hover:bg-slate-50 transition-colors">
                                <input type="checkbox" name="newFeatures[]" value="rewards" class="w-4 h-4 text-primary form-focus rounded">
                                <span class="ml-2 text-slate-700">其他(写在"其他"模块中)</span>
                            </label>
                            <!-- 可在此处继续添加更多选项 -->
                        </div>
                    </div>
                </section>
                

                <!-- 模板：新增文本输入 -->
                <div class="custom-option-group">
                    <h3 class="font-medium text-slate-800 mb-3 flex items-center">
                        <i class="fa fa-图标类名 text-primary mr-2"></i>其他（选填）
                    </h3>
                    <input type="text" name="自定义键名" 
                        class="w-full px-4 py-2.5 border border-slate-300 rounded-lg form-focus transition duration-200"
                        placeholder="请输入你的想法...">
                </div>



                <!-- 建议与意见 -->
                <section class="space-y-5 animate-fade-in" style="animation-delay: 0.2s">
                    <h2 class="text-xl font-semibold text-dark flex items-center">
                        <i class="fa fa-comment text-primary mr-2"></i>建议与意见
                    </h2>
                    
                    <div class="space-y-1">
                        <label for="suggestions" class="block text-sm font-medium text-slate-700">
                            你的建议 
                            <span class="required-tag">必填</span>
                        </label>
                        <textarea id="suggestions" name="suggestions" rows="3" required
                            class="w-full px-4 py-2.5 border border-slate-300 rounded-lg form-focus transition duration-200 resize-none"
                            placeholder="至少3个字，比如：希望增加XX功能"></textarea>
                        <div class="flex justify-between items-center">
                            <p id="suggestionsError" class="error-text hidden">
                                <i class="fa fa-times-circle mr-1"></i> 建议需至少3个字
                            </p>
                            <p class="text-sm text-slate-500" id="charCountWrap">
                                <span id="charCount">0</span>/200 字符
                            </p>
                        </div>
                    </div>
                    
                    <!-- 新增选项3：是否愿意参与测试（单选） -->
                    <div class="custom-option-group">
                        <h3 class="font-medium text-slate-800 mb-3 flex items-center">
                            <i class="fa fa-flask text-primary mr-2"></i>是否愿意参与新功能测试？
                        </h3>
                        <div class="flex space-x-8">
                            <label class="inline-flex items-center cursor-pointer group">
                                <input type="radio" name="test意愿" value="yes" class="visually-hidden peer" tabindex="0">
                                <span class="w-5 h-5 border-2 border-slate-300 rounded-full mr-2 flex items-center justify-center peer-checked:border-primary group-hover:border-primary/70 transition-all"></span>
                                <span class="text-slate-700">愿意（会收到测试邀请）</span>
                            </label>
                            <label class="inline-flex items-center cursor-pointer group">
                                <input type="radio" name="test意愿" value="no" class="visually-hidden peer" tabindex="0" checked>
                                <span class="w-5 h-5 border-2 border-slate-300 rounded-full mr-2 flex items-center justify-center peer-checked:border-primary group-hover:border-primary/70 transition-all"></span>
                                <span class="text-slate-700">暂时不考虑（默认选择）</span>
                            </label>
                        </div>
                    </div>
                </section>
                
                <!-- 提交按钮 -->
                <div class="pt-4 flex justify-center animate-fade-in" style="animation-delay: 0.3s">
                    <button type="submit" id="submitBtn" 
                        class="bg-accent hover:bg-accent/90 text-white font-medium px-10 py-3.5 rounded-lg transition-all duration-300 flex items-center group shadow-md hover:shadow-lg transform hover:-translate-y-0.5 text-base">
                        <i class="fa fa-paper-plane mr-2 group-hover:translate-x-1 transition-transform"></i>
                        <span>提交反馈</span>
                    </button>
                </div>
            </form>
        </div>
        
        <!-- 成功提交提示 -->
        <div id="successMessage" class="hidden bg-green-50 border border-green-200 rounded-xl p-6 md:p-8 text-center animate-fade-in">
            <div class="w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4 transform transition-all hover:scale-110">
                <i class="fa fa-check-circle text-4xl text-green-500"></i>
            </div>
            <h3 class="text-2xl font-semibold text-green-800 mb-3">反馈提交成功！</h3>
            <p class="text-green-700 mb-6 text-lg max-w-md mx-auto">
                感谢你的建议，我们会认真参考～
            </p>
            <a href="indexdaohang.html" class="inline-flex items-center bg-primary hover:bg-primary/90 text-white font-medium px-8 py-3 rounded-lg transition-all duration-300 shadow hover:shadow-md transform hover:-translate-y-0.5">
                <i class="fa fa-arrow-left mr-2"></i>
                <span>返回游戏首页</span>
            </a>
        </div>
        
        <footer class="text-center text-slate-500 text-sm py-6 mt-8">
            <p class="flex items-center justify-center">
                <i class="fa fa-heart text-primary mr-2"></i>
                © 2025 半猫诺丷 | 你的反馈很重要
            </p>
        </footer>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('surveyForm');
            const successMessage = document.getElementById('successMessage');
            const submitBtn = document.getElementById('submitBtn');
            
            // 核心表单元素
            const nameInput = document.getElementById('name');
            const suggestionsInput = document.getElementById('suggestions');
            const satisfactionRadios = document.querySelectorAll('input[name="satisfaction"]');
            const satisfactionGroup = document.getElementById('satisfactionGroup');
            const charCount = document.getElementById('charCount');
            const charCountWrap = document.getElementById('charCountWrap');
            
            // 错误提示元素
            const nameError = document.getElementById('nameError');
            const suggestionsError = document.getElementById('suggestionsError');
            const satisfactionError = document.getElementById('satisfactionError');
            
            // 1. 建议输入框实时处理
            suggestionsInput.addEventListener('input', function() {
                const length = this.value.trim().length;
                charCount.textContent = length;
                
                if (length >= 180) {
                    charCountWrap.classList.add('text-danger', 'font-medium');
                } else {
                    charCountWrap.classList.remove('text-danger', 'font-medium');
                }
                
                if (length > 0 && length < 3) {
                    suggestionsInput.classList.add('input-error');
                    suggestionsError.classList.remove('hidden');
                    suggestionsInput.classList.add('animate-shake');
                    setTimeout(() => suggestionsInput.classList.remove('animate-shake'), 300);
                } else if (length >= 3) {
                    suggestionsInput.classList.remove('input-error');
                    suggestionsError.classList.add('hidden');
                }
            });
            
            // 2. 昵称输入实时处理
            nameInput.addEventListener('input', function() {
                const length = this.value.trim().length;
                if (length > 0 && (length < 2 || length > 6)) {
                    nameInput.classList.add('input-error');
                    nameError.classList.remove('hidden');
                    nameInput.classList.add('animate-shake');
                    setTimeout(() => nameInput.classList.remove('animate-shake'), 300);
                } else if (length >= 2 && length <= 6) {
                    nameInput.classList.remove('input-error');
                    nameError.classList.add('hidden');
                }
            });
            
            // 3. 满意度选择处理
            satisfactionGroup.addEventListener('click', function(e) {
                let isSelected = false;
                satisfactionRadios.forEach(radio => {
                    if (radio.checked) isSelected = true;
                });
                if (!isSelected && e.target !== satisfactionGroup) {
                    satisfactionError.classList.remove('hidden');
                    satisfactionGroup.classList.add('animate-shake', 'border', 'border-danger/30', 'p-2', 'rounded-lg');
                    setTimeout(() => {
                        satisfactionGroup.classList.remove('animate-shake', 'border', 'border-danger/30', 'p-2', 'rounded-lg');
                    }, 500);
                }
            });
            
            // 4. 验证函数
            function validateName() {
                const length = nameInput.value.trim().length;
                if (length < 2 || length > 6) {
                    nameInput.classList.add('input-error');
                    nameError.classList.remove('hidden');
                    nameInput.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    nameInput.classList.add('animate-shake');
                    setTimeout(() => nameInput.classList.remove('animate-shake'), 300);
                    return false;
                }
                return true;
            }
            
            function validateSatisfaction() {
                let isSelected = false;
                satisfactionRadios.forEach(radio => {
                    if (radio.checked) isSelected = true;
                });
                if (!isSelected) {
                    satisfactionError.classList.remove('hidden');
                    satisfactionGroup.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    satisfactionGroup.classList.add('animate-shake', 'border', 'border-danger/30', 'p-2', 'rounded-lg');
                    setTimeout(() => {
                        satisfactionGroup.classList.remove('animate-shake', 'border', 'border-danger/30', 'p-2', 'rounded-lg');
                    }, 500);
                    return false;
                }
                return true;
            }
            
            function validateSuggestions() {
                const length = suggestionsInput.value.trim().length;
                if (length < 3) {
                    suggestionsInput.classList.add('input-error');
                    suggestionsError.classList.remove('hidden');
                    suggestionsInput.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    suggestionsInput.classList.add('animate-shake');
                    setTimeout(() => suggestionsInput.classList.remove('animate-shake'), 300);
                    return false;
                }
                return true;
            }
            
            // 5. 表单提交处理（新增选项会自动被收集，无需额外修改）
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // 隐藏错误提示
                nameError.classList.add('hidden');
                satisfactionError.classList.add('hidden');
                suggestionsError.classList.add('hidden');
                nameInput.classList.remove('input-error');
                suggestionsInput.classList.remove('input-error');
                satisfactionGroup.classList.remove('border', 'border-danger/30', 'p-2', 'rounded-lg');
                
                // 验证必填项
                const isNameValid = validateName();
                const isSatisfactionValid = validateSatisfaction();
                const isSuggestionsValid = validateSuggestions();
                
                if (isNameValid && isSatisfactionValid && isSuggestionsValid) {
                    // 提交状态
                    submitBtn.disabled = true;
                    submitBtn.innerHTML = '<i class="fa fa-spinner fa-spin mr-2"></i>提交中...';
                    
                    // 收集所有数据（包括新增选项）
                    const formData = new FormData(form);
                    const surveyData = {};
                    formData.forEach((value, key) => {
                        if (key.endsWith('[]')) {
                            const arrayKey = key.slice(0, -2);
                            surveyData[arrayKey] = surveyData[arrayKey] ? [...surveyData[arrayKey], value.trim()] : [value.trim()];
                        } else {
                            if (value.trim() !== '') surveyData[key] = value.trim();
                        }
                    });
                    
                    // 模拟提交
                    setTimeout(() => {
                        form.parentElement.classList.add('hidden');
                        successMessage.classList.remove('hidden');
                        
                        // 存储数据
                        const feedbackRecords = JSON.parse(localStorage.getItem('gameFeedbackRecords') || '[]');
                        feedbackRecords.push({ ...surveyData, submitTime: new Date().toLocaleString() });
                        localStorage.setItem('gameFeedbackRecords', JSON.stringify(feedbackRecords));
                    }, 1000);
                } else {
                    alert('请完善以下必填项：\n1. 游戏昵称（2-6字）\n2. 总体满意度（选1-5分）\n3. 建议（至少3字）');
                }
            });
        });
    </script>
</body>
</html>