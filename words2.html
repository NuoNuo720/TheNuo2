<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>外研版选择性必修第一册英语单词默写</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    
    <!-- 配置Tailwind自定义颜色和字体 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3B82F6',
                        secondary: '#10B981',
                        accent: '#F59E0B',
                        neutral: '#6B7280',
                        light: '#F3F4F6',
                        dark: '#1F2937'
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .card-hover {
                @apply transition-all duration-300 hover:shadow-lg hover:-translate-y-1;
            }
            .btn-nav {
                @apply bg-neutral text-white py-2 px-4 rounded-lg transition-all duration-300 hover:bg-neutral/90 active:scale-95 focus:outline-none focus:ring-2 focus:ring-neutral/50;
            }
            .btn-primary {
                @apply bg-primary text-white py-2 px-4 rounded-lg transition-all duration-300 hover:bg-primary/90 active:scale-95 focus:outline-none focus:ring-2 focus:ring-primary/50;
            }
            .btn-secondary {
                @apply bg-secondary text-white py-2 px-4 rounded-lg transition-all duration-300 hover:bg-secondary/90 active:scale-95 focus:outline-none focus:ring-2 focus:ring-secondary/50;
            }
            .btn-accent {
                @apply bg-accent text-white py-2 px-4 rounded-lg transition-all duration-300 hover:bg-accent/90 active:scale-95 focus:outline-none focus:ring-2 focus:ring-accent/50;
            }
            .input-field {
                @apply border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all;
            }
            .progress-bar {
                @apply h-2 bg-gray-200 rounded-full overflow-hidden;
            }
            .progress-value {
                @apply h-full bg-primary rounded-full transition-all duration-500 ease-out;
            }
            .unit-btn {
                @apply input-field text-left py-3 transition-all duration-300;
            }
            .unit-btn.active {
                @apply border-primary bg-primary/5;
            }
            .part-of-speech {
                @apply inline-block bg-primary/10 text-primary text-xs px-2 py-0.5 rounded mr-2;
            }
            .pronunciation-highlight {
                @apply text-primary font-medium;
            }
            .wrong-item {
                @apply animate-pulse;
            }
        }
    </style>
</head>
<body class="bg-gray-50 font-sans text-dark">
    <!-- 顶部导航栏 -->
    <header class="bg-white shadow-sm sticky top-0 z-10">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <button id="nav-back-btn" class="btn-nav flex items-center order-0">
                <i class="fa fa-arrow-left mr-2"></i>返回导航页
            </button>
            <div class="flex items-center space-x-2 order-1">
                <i class="fa fa-book text-primary text-2xl"></i>
                <h1 class="text-xl md:text-2xl font-bold text-primary">外研版选择性必修第一册单词默写</h1>
            </div>
            <div class="flex items-center space-x-4 order-2">
                <span id="progress-text" class="hidden md:inline-block text-neutral">进度: 0/0</span>
                <div class="hidden md:block progress-bar w-40">
                    <div id="progress-bar" class="progress-value" style="width: 0%"></div>
                </div>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8">
        <!-- 介绍卡片 -->
        <div id="intro-card" class="bg-white rounded-xl shadow-md p-6 mb-8 card-hover">
            <h2 class="text-xl font-bold mb-4 flex items-center">
                <i class="fa fa-info-circle text-primary mr-2"></i>欢迎使用单词默写练习
            </h2>
            <p class="text-neutral mb-4">这个工具匹配外研版选择性必修第一册教材，帮助你针对性练习各单元单词。</p>
            
            <div class="mb-6">
                <h3 class="font-semibold mb-3">选择单元:</h3>
                <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3" id="unit-selector">
                    <!-- 单元按钮将通过JS动态生成 -->
                </div>
            </div>
            
            <button id="start-btn" class="btn-primary w-full" disabled>
                <i class="fa fa-play mr-2"></i>开始练习
            </button>
        </div>

        <!-- 练习卡片 -->
        <div id="quiz-card" class="bg-white rounded-xl shadow-md p-6 mb-8 hidden">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-xl font-bold flex items-center">
                    <i class="fa fa-question-circle text-primary mr-2"></i><span id="current-unit-title">单词默写</span>
                </h2>
                <span id="current-word" class="bg-light px-3 py-1 rounded-full text-sm font-medium">第 1 题 / 共 0 题</span>
            </div>
            
            <div class="mb-6">
                <!-- 新增：显示单词词性 -->
                <div id="word-part-of-speech" class="mb-2"></div>
                <p id="word-definition" class="text-lg mb-2">单词释义将在这里显示</p>
                <div class="flex items-center mb-2">
                    <span>请写出对应的英语单词: </span>
                    <input type="text" id="answer-input" class="input-field ml-2 flex-1" placeholder="在此输入答案">
                </div>
                <div id="pronunciation" class="text-sm text-neutral italic mt-2 hidden">
                    <i class="fa fa-volume-up mr-1"></i>
                    <span>发音: </span>
                    <span class="pronunciation-highlight" id="pronunciation-text"></span>
                    <button id="play-audio" class="text-primary hover:underline ml-1">播放</button>
                </div>
            </div>
            
            <div class="flex flex-wrap gap-3">
                <button id="check-btn" class="btn-primary">
                    <i class="fa fa-check mr-2"></i>检查答案
                </button>
                <button id="hint-btn" class="btn-accent">
                    <i class="fa fa-lightbulb-o mr-2"></i>提示
                </button>
                <button id="skip-btn" class="btn-secondary ml-auto">
                    <i class="fa fa-forward mr-2"></i>跳过
                </button>
            </div>
            
            <div id="feedback" class="mt-6 hidden">
                <div id="correct-feedback" class="bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg hidden">
                    <div class="flex items-start">
                        <i class="fa fa-check-circle text-secondary text-xl mt-1 mr-3"></i>
                        <div>
                            <p class="font-medium">正确！</p>
                            <p id="correct-message" class="text-sm mt-1"></p>
                        </div>
                    </div>
                </div>
                
                <div id="wrong-feedback" class="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg hidden">
                    <div class="flex items-start">
                        <i class="fa fa-times-circle text-red-500 text-xl mt-1 mr-3"></i>
                        <div>
                            <p class="font-medium">不正确</p>
                            <p id="wrong-message" class="text-sm mt-1"></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 结果卡片 -->
        <div id="result-card" class="bg-white rounded-xl shadow-md p-6 mb-8 hidden">
            <h2 class="text-xl font-bold mb-6 flex items-center">
                <i class="fa fa-bar-chart text-primary mr-2"></i>练习结果
            </h2>
            
            <div class="text-center mb-6">
                <div class="inline-flex items-center justify-center w-32 h-32 rounded-full bg-primary/10 mb-4">
                    <span id="score-display" class="text-4xl font-bold text-primary">0</span>
                    <span class="text-xl font-bold text-primary ml-1">/100</span>
                </div>
                <p id="result-message" class="text-lg"></p>
                <p id="result-unit" class="text-neutral mt-2"></p>
                <!-- 新增：错题统计 -->
                <p id="wrong-count" class="text-neutral mt-1"></p>
            </div>
            
            <div class="mb-6">
                <h3 class="font-semibold mb-3">单词掌握情况</h3>
                <div class="space-y-3 max-h-60 overflow-y-auto pr-2">
                    <div id="results-list"></div>
                </div>
                <!-- 新增：错题集标题 -->
                <h3 id="wrong-list-title" class="font-semibold mb-3 mt-8 hidden">
                    <i class="fa fa-exclamation-circle text-red-500 mr-2"></i>错题集（建议重点复习）
                </h3>
                <div class="space-y-3 max-h-40 overflow-y-auto pr-2">
                    <div id="wrong-list" class="hidden"></div>
                </div>
            </div>
            
            <div class="flex gap-4">
                <button id="restart-btn" class="btn-primary flex-1">
                    <i class="fa fa-refresh mr-2"></i>重新练习
                </button>
                <button id="back-btn" class="btn-secondary flex-1">
                    <i class="fa fa-arrow-left mr-2"></i>选择其他单元
                </button>
                <button id="result-nav-back-btn" class="btn-nav flex-1">
                    <i class="fa fa-home mr-2"></i>返回导航页
                </button>
            </div>
        </div>
    </main>

    <footer class="bg-dark text-white py-6">
        <div class="container mx-auto px-4 text-center">
            <p>外研版选择性必修第一册单词默写练习 &copy; 2025</p>
            <p class="text-sm text-gray-400 mt-2">匹配教材的针对性单词练习工具</p>
        </div>
    </footer>

    <script>
        // 外研版选择性必修第一册单词按单元分类（严格匹配教材）
        const wordUnits = {
            unit1: {
                title: "第一单元：Laugh out loud",
                words: [
                    { 
                        word: "mood", 
                        partOfSpeech: "n.", 
                        definition: "心情", 
                        pronunciation: "/muːd/" 
                    },
                    { 
                        word: "circus", 
                        partOfSpeech: "n.", 
                        definition: "马戏团", 
                        pronunciation: "/ˈsɜːkəs/" 
                    },
                    { 
                        word: "amusement", 
                        partOfSpeech: "n.", 
                        definition: "娱乐，消遣", 
                        pronunciation: "/əˈmjuːzmənt/" 
                    },
                    { 
                        word: "amusement park", 
                        partOfSpeech: "n.", 
                        definition: "游乐场", 
                        pronunciation: "/əˈmjuːzmənt pɑːk/" 
                    },
                    { 
                        word: "curly", 
                        partOfSpeech: "adj.", 
                        definition: "卷曲的", 
                        pronunciation: "/ˈkɜːli/" 
                    },
                    { 
                        word: "wig", 
                        partOfSpeech: "n.", 
                        definition: "假发", 
                        pronunciation: "/wɪɡ/" 
                    },
                    { 
                        word: "badge", 
                        partOfSpeech: "n.", 
                        definition: "徽章", 
                        pronunciation: "/bædʒ/" 
                    },
                    { 
                        word: "ankle", 
                        partOfSpeech: "n.", 
                        definition: "脚踝", 
                        pronunciation: "/ˈæŋkl/" 
                    },
                    { 
                        word: "clown", 
                        partOfSpeech: "n.", 
                        definition: "小丑", 
                        pronunciation: "/klaʊn/" 
                    },
                    { 
                        word: "entertain", 
                        partOfSpeech: "v.", 
                        definition: "使娱乐", 
                        pronunciation: "/ˌentəˈteɪn/" 
                    },
                    { 
                        word: "healthcare", 
                        partOfSpeech: "n.", 
                        definition: "医疗保健", 
                        pronunciation: "/ˈhelθkeə(r)/" 
                    },
                    { 
                        word: "cheer up", 
                        partOfSpeech: "phrasal v.", 
                        definition: "（使）高兴起来，（使）振作起来", 
                        pronunciation: "/tʃɪə ʌp/" 
                    },
                    { 
                        word: "do the trick", 
                        partOfSpeech: "idiom", 
                        definition: "奏效，达到预期效果", 
                        pronunciation: "/duː ðə trɪk/" 
                    },
                    { 
                        word: "examine", 
                        partOfSpeech: "v.", 
                        definition: "检查（身体）", 
                        pronunciation: "/ɪɡˈzæmɪn/" 
                    },
                    { 
                        word: "advertisement", 
                        partOfSpeech: "n.", 
                        definition: "广告", 
                        pronunciation: "/ədˈvɜːtɪsmənt/" 
                    },
                    { 
                        word: "employer", 
                        partOfSpeech: "n.", 
                        definition: "雇用者，雇主", 
                        pronunciation: "/ɪmˈplɔɪə(r)/" 
                    },
                    { 
                        word: "essential", 
                        partOfSpeech: "adj.", 
                        definition: "极其重要的，必不可少的", 
                        pronunciation: "/ɪˈsenʃl/" 
                    },
                    { 
                        word: "impress", 
                        partOfSpeech: "v.", 
                        definition: "使钦佩，使留下深刻印象", 
                        pronunciation: "/ɪmˈpres/" 
                    },
                    { 
                        word: "grin", 
                        partOfSpeech: "v.", 
                        definition: "露齿而笑，咧着嘴笑", 
                        pronunciation: "/ɡrɪn/" 
                    },
                    { 
                        word: "deserve", 
                        partOfSpeech: "v.", 
                        definition: "应得，应受到", 
                        pronunciation: "/dɪˈzɜːv/" 
                    },
                    { 
                        word: "long face", 
                        partOfSpeech: "n.", 
                        definition: "愁眉苦脸", 
                        pronunciation: "/lɒŋ feɪs/" 
                    },
                    { 
                        word: "laughing stock", 
                        partOfSpeech: "n.", 
                        definition: "笑料，笑柄", 
                        pronunciation: "/ˈlɑːfɪŋ stɒk/" 
                    },
                    { 
                        word: "crack a smile", 
                        partOfSpeech: "idiom", 
                        definition: "笑了起来", 
                        pronunciation: "/kræk ə smaɪl/" 
                    },
                    { 
                        word: "practical joke", 
                        partOfSpeech: "n.", 
                        definition: "恶作剧", 
                        pronunciation: "/ˌpræktɪkl ˈdʒəʊk/" 
                    },
                    { 
                        word: "fame", 
                        partOfSpeech: "n.", 
                        definition: "名声，名誉", 
                        pronunciation: "/feɪm/" 
                    },
                    { 
                        word: "linguist", 
                        partOfSpeech: "n.", 
                        definition: "语言学家", 
                        pronunciation: "/ˈlɪŋɡwɪst/" 
                    }
                ]
            },
            unit2: {
                title: "第二单元：Onwards and upwards",
                words: [
                    { 
                        word: "debt", 
                        partOfSpeech: "n.", 
                        definition: "债务，欠款", 
                        pronunciation: "/det/" 
                    },
                    { 
                        word: "pace", 
                        partOfSpeech: "n.", 
                        definition: "速度，进度", 
                        pronunciation: "/peɪs/" 
                    },
                    { 
                        word: "inform", 
                        partOfSpeech: "v.", 
                        definition: "通知，告知", 
                        pronunciation: "/ɪnˈfɔːm/" 
                    },
                    { 
                        word: "dread", 
                        partOfSpeech: "v.", 
                        definition: "畏惧，惧怕", 
                        pronunciation: "/dred/" 
                    },
                    { 
                        word: "rarely", 
                        partOfSpeech: "adv.", 
                        definition: "很少，难得", 
                        pronunciation: "/ˈreəli/" 
                    },
                    { 
                        word: "overnight", 
                        partOfSpeech: "adv.", 
                        definition: "突然，一下子", 
                        pronunciation: "/ˌəʊvəˈnaɪt/" 
                    },
                    { 
                        word: "rejection", 
                        partOfSpeech: "n.", 
                        definition: "拒绝，否决", 
                        pronunciation: "/rɪˈdʒekʃn/" 
                    },
                    { 
                        word: "nevertheless", 
                        partOfSpeech: "adv.", 
                        definition: "然而，不过", 
                        pronunciation: "/ˌnevəðəˈles/" 
                    },
                    { 
                        word: "persevere", 
                        partOfSpeech: "v.", 
                        definition: "锲而不舍，坚持不懈", 
                        pronunciation: "/ˌpɜːsəˈvɪə(r)/" 
                    },
                    { 
                        word: "criticism", 
                        partOfSpeech: "n.", 
                        definition: "批评，指责", 
                        pronunciation: "/ˈkrɪtɪsɪzəm/" 
                    },
                    { 
                        word: "manuscript", 
                        partOfSpeech: "n.", 
                        definition: "手稿，底稿", 
                        pronunciation: "/ˈmænjuskrɪpt/" 
                    },
                    { 
                        word: "rye", 
                        partOfSpeech: "n.", 
                        definition: "黑麦", 
                        pronunciation: "/raɪ/" 
                    },
                    { 
                        word: "best-seller", 
                        partOfSpeech: "n.", 
                        definition: "畅销书，畅销产品", 
                        pronunciation: "/ˌbest ˈselə(r)/" 
                    },
                    { 
                        word: "Victorian", 
                        partOfSpeech: "adj.", 
                        definition: "英国维多利亚（女王）时代的", 
                        pronunciation: "/vɪkˈtɔːriən/" 
                    },
                    { 
                        word: "laureate", 
                        partOfSpeech: "n.", 
                        definition: "重要奖项获得者", 
                        pronunciation: "/ˈlɒriət/" 
                    },
                    { 
                        word: "Poet Laureate", 
                        partOfSpeech: "n.", 
                        definition: "桂冠诗人", 
                        pronunciation: "/ˌpəʊɪt ˈlɒriət/" 
                    },
                    { 
                        word: "classic", 
                        partOfSpeech: "n.", 
                        definition: "名著，经典作品", 
                        pronunciation: "/ˈklæsɪk/" 
                    },
                    { 
                        word: "endurance", 
                        partOfSpeech: "n.", 
                        definition: "（忍）耐力", 
                        pronunciation: "/ɪnˈdjʊərəns/" 
                    },
                    { 
                        word: "guarantee", 
                        partOfSpeech: "v.", 
                        definition: "保证，确保", 
                        pronunciation: "/ˌɡærənˈtiː/" 
                    },
                    { 
                        word: "delighted", 
                        partOfSpeech: "adj.", 
                        definition: "愉快的，高兴的", 
                        pronunciation: "/dɪˈlaɪtɪd/" 
                    }
                ]
            },
            unit3: {
                title: "第三单元：Faster, higher, stronger",
                words: [
                    { 
                        word: "stadium", 
                        partOfSpeech: "n.", 
                        definition: "体育场，运动场", 
                        pronunciation: "/ˈsteɪdiəm/" 
                    },
                    { 
                        word: "doping", 
                        partOfSpeech: "n.", 
                        definition: "使用兴奋剂", 
                        pronunciation: "/ˈdəʊpɪŋ/" 
                    },
                    { 
                        word: "controversy", 
                        partOfSpeech: "n.", 
                        definition: "争议，争论", 
                        pronunciation: "/ˈkɒntrəvɜːsi/" 
                    },
                    { 
                        word: "undertake", 
                        partOfSpeech: "v.", 
                        definition: "着手做，从事", 
                        pronunciation: "/ˌʌndəˈteɪk/" 
                    },
                    { 
                        word: "gene", 
                        partOfSpeech: "n.", 
                        definition: "基因", 
                        pronunciation: "/dʒiːn/" 
                    },
                    { 
                        word: "tough", 
                        partOfSpeech: "adj.", 
                        definition: "艰难的，棘手的", 
                        pronunciation: "/tʌf/" 
                    },
                    { 
                        word: "advocate", 
                        partOfSpeech: "v.", 
                        definition: "主张，拥护", 
                        pronunciation: "/ˈædvəkeɪt/" 
                    },
                    { 
                        word: "ban", 
                        partOfSpeech: "v.", 
                        definition: "禁止", 
                        pronunciation: "/bæn/" 
                    },
                    { 
                        word: "committee", 
                        partOfSpeech: "n.", 
                        definition: "委员会", 
                        pronunciation: "/kəˈmɪti/" 
                    },
                    { 
                        word: "regulate", 
                        partOfSpeech: "v.", 
                        definition: "管理，控制", 
                        pronunciation: "/ˈreɡjuleɪt/" 
                    },
                    { 
                        word: "entitle", 
                        partOfSpeech: "v.", 
                        definition: "使有权利，使有资格", 
                        pronunciation: "/ɪnˈtaɪtl/" 
                    },
                    { 
                        word: "equality", 
                        partOfSpeech: "n.", 
                        definition: "平等", 
                        pronunciation: "/iˈkwɒləti/" 
                    },
                    { 
                        word: "triumph", 
                        partOfSpeech: "n.", 
                        definition: "胜利，成功", 
                        pronunciation: "/ˈtraɪʌmf/" 
                    },
                    { 
                        word: "glory", 
                        partOfSpeech: "n.", 
                        definition: "荣誉，光荣", 
                        pronunciation: "/ˈɡlɔːri/" 
                    },
                    { 
                        word: "legendary", 
                        partOfSpeech: "adj.", 
                        definition: "传奇的，著名的", 
                        pronunciation: "/ˈledʒəndri/" 
                    },
                    { 
                        word: "dare", 
                        partOfSpeech: "v.", 
                        definition: "敢于，胆敢", 
                        pronunciation: "/deə(r)/" 
                    },
                    { 
                        word: "极限的", 
                        partOfSpeech: "adj.", 
                        definition: "ultimate", 
                        pronunciation: "/ˈʌltɪmət/" 
                    },
                    { 
                        word: "打破", 
                        partOfSpeech: "v.", 
                        definition: "smash", 
                        pronunciation: "/smæʃ/" 
                    },
                    { 
                        word: "记录", 
                        partOfSpeech: "n.", 
                        definition: "record", 
                        pronunciation: "/ˈrekɔːd/" 
                    },
                    { 
                        word: "激励", 
                        partOfSpeech: "v.", 
                        definition: "inspire", 
                        pronunciation: "/ɪnˈspaɪə(r)/" 
                    }
                ]
            },
            unit4: {
                title: "第四单元：Meeting the muse",
                words: [
                    { 
                        word: "muse", 
                        partOfSpeech: "n.", 
                        definition: "灵感，缪斯（女神）", 
                        pronunciation: "/mjuːz/" 
                    },
                    { 
                        word: "civilisation", 
                        partOfSpeech: "n.", 
                        definition: "文明", 
                        pronunciation: "/ˌsɪvəlaɪˈzeɪʃn/" 
                    },
                    { 
                        word: "symbol", 
                        partOfSpeech: "n.", 
                        definition: "象征，符号", 
                        pronunciation: "/ˈsɪmbl/" 
                    },
                    { 
                        word: "universal", 
                        partOfSpeech: "adj.", 
                        definition: "普遍的，共同的", 
                        pronunciation: "/ˌjuːnɪˈvɜːsl/" 
                    },
                    { 
                        word: "dynasty", 
                        partOfSpeech: "n.", 
                        definition: "王朝，朝代", 
                        pronunciation: "/ˈdɪnəsti/" 
                    },
                    { 
                        word: "technique", 
                        partOfSpeech: "n.", 
                        definition: "技巧，手法", 
                        pronunciation: "/tekˈniːk/" 
                    },
                    { 
                        word: "represent", 
                        partOfSpeech: "v.", 
                        definition: "代表，象征", 
                        pronunciation: "/ˌreprɪˈzent/" 
                    },
                    { 
                        word: "soul", 
                        partOfSpeech: "n.", 
                        definition: "灵魂，心灵", 
                        pronunciation: "/səʊl/" 
                    },
                    { 
                        word: "emotion", 
                        partOfSpeech: "n.", 
                        definition: "情感，情绪", 
                        pronunciation: "/ɪˈməʊʃn/" 
                    },
                    { 
                        word: "visual", 
                        partOfSpeech: "adj.", 
                        definition: "视觉的", 
                        pronunciation: "/ˈvɪʒuəl/" 
                    },
                    { 
                        word: "abstract", 
                        partOfSpeech: "adj.", 
                        definition: "抽象的", 
                        pronunciation: "/ˈæbstrækt/" 
                    },
                    { 
                        word: "interpret", 
                        partOfSpeech: "v.", 
                        definition: "诠释，解释", 
                        pronunciation: "/ɪnˈtɜːprət/" 
                    },
                    { 
                        word: "sculpture", 
                        partOfSpeech: "n.", 
                        definition: "雕塑，雕像", 
                        pronunciation: "/ˈskʌlptʃə(r)/" 
                    },
                    { 
                        word: "exhibition", 
                        partOfSpeech: "n.", 
                        definition: "展览，展出", 
                        pronunciation: "/ˌeksɪˈbɪʃn/" 
                    },
                    { 
                        word: "permanent", 
                        partOfSpeech: "adj.", 
                        definition: "永久的，永恒的", 
                        pronunciation: "/ˈpɜːmənənt/" 
                    },
                    { 
                        word: "appeal", 
                        partOfSpeech: "v.", 
                        definition: "有吸引力，引起兴趣", 
                        pronunciation: "/əˈpiːl/" 
                    },
                    { 
                        word: "innovation", 
                        partOfSpeech: "n.", 
                        definition: "创新，革新", 
                        pronunciation: "/ˌɪnəˈveɪʃn/" 
                    },
                    { 
                        word: "heritage", 
                        partOfSpeech: "n.", 
                        definition: "遗产，传统", 
                        pronunciation: "/ˈherɪtɪdʒ/" 
                    },
                    { 
                        word: "masterpiece", 
                        partOfSpeech: "n.", 
                        definition: "杰作，代表作", 
                        pronunciation: "/ˈmɑːstəpiːs/" 
                    },
                    { 
                        word: "convey", 
                        partOfSpeech: "v.", 
                        definition: "表达，传递", 
                        pronunciation: "/kənˈveɪ/" 
                    }
                ]
            },
            unit5: {
                title: "第五单元：Revealing nature",
                words: [
                    { 
                        word: "reveal", 
                        partOfSpeech: "v.", 
                        definition: "揭示，显示", 
                        pronunciation: "/rɪˈviːl/" 
                    },
                    { 
                        word: "phenomenon", 
                        partOfSpeech: "n.", 
                        definition: "现象", 
                        pronunciation: "/fəˈnɒmɪnən/" 
                    },
                    { 
                        word: "theory", 
                        partOfSpeech: "n.", 
                        definition: "理论，学说", 
                        pronunciation: "/ˈθɪəri/" 
                    },
                    { 
                        word: "scientific", 
                        partOfSpeech: "adj.", 
                        definition: "科学的", 
                        pronunciation: "/ˌsaɪənˈtɪfɪk/" 
                    },
                    { 
                        word: "biology", 
                        partOfSpeech: "n.", 
                        definition: "生物学", 
                        pronunciation: "/baɪˈɒlədʒi/" 
                    },
                    { 
                        word: "geology", 
                        partOfSpeech: "n.", 
                        definition: "地质学", 
                        pronunciation: "/dʒiˈɒlədʒi/" 
                    },
                    { 
                        word: "publish", 
                        partOfSpeech: "v.", 
                        definition: "出版，发表", 
                        pronunciation: "/ˈpʌblɪʃ/" 
                    },
                    { 
                        word: "origin", 
                        partOfSpeech: "n.", 
                        definition: "起源，来源", 
                        pronunciation: "/ˈɒrɪdʒɪn/" 
                    },
                    { 
                        word: "species", 
                        partOfSpeech: "n.", 
                        definition: "物种", 
                        pronunciation: "/ˈspiːʃiːz/" 
                    },
                    { 
                        word: "evolve", 
                        partOfSpeech: "v.", 
                        definition: "进化，演变", 
                        pronunciation: "/iˈvɒlv/" 
                    },
                    { 
                        word: "survival", 
                        partOfSpeech: "n.", 
                        definition: "生存，存活", 
                        pronunciation: "/səˈvaɪvl/" 
                    },
                    { 
                        word: "adapt", 
                        partOfSpeech: "v.", 
                        definition: "适应", 
                        pronunciation: "/əˈdæpt/" 
                    },
                    { 
                        word: "genetic", 
                        partOfSpeech: "adj.", 
                        definition: "基因的，遗传的", 
                        pronunciation: "/dʒəˈnetɪk/" 
                    },
                    { 
                        word: "diverse", 
                        partOfSpeech: "adj.", 
                        definition: "多样的，不同的", 
                        pronunciation: "/daɪˈvɜːs/" 
                    },
                    { 
                        word: "complex", 
                        partOfSpeech: "adj.", 
                        definition: "复杂的", 
                        pronunciation: "/ˈkɒmpleks/" 
                    },
                    { 
                        word: "puzzle", 
                        partOfSpeech: "n.", 
                        definition: "谜，难题", 
                        pronunciation: "/ˈpʌzl/" 
                    },
                    { 
                        word: "bacteria", 
                        partOfSpeech: "n.", 
                        definition: "细菌", 
                        pronunciation: "/bækˈtɪəriə/" 
                    },
                    { 
                        word: "analysis", 
                        partOfSpeech: "n.", 
                        definition: "分析", 
                        pronunciation: "/əˈnæləsis/" 
                    },
                    { 
                        word: "sustain", 
                        partOfSpeech: "v.", 
                        definition: "维持，支撑", 
                        pronunciation: "/səˈsteɪn/" 
                    },
                    { 
                        word: "ecology", 
                        partOfSpeech: "n.", 
                        definition: "生态学", 
                        pronunciation: "/iˈkɒlədʒi/" 
                    }
                ]
            }
        };

        // 全局变量
        let currentUnit = null;
        let currentWords = [];
        let currentIndex = 0;
        let score = 0;
        let userAnswers = [];
        let wrongAnswers = [];

        // DOM元素
        const introCard = document.getElementById('intro-card');
        const quizCard = document.getElementById('quiz-card');
        const resultCard = document.getElementById('result-card');
        const unitSelector = document.getElementById('unit-selector');
        const currentUnitTitle = document.getElementById('current-unit-title');
        
        const wordPartOfSpeech = document.getElementById('word-part-of-speech');
        const wordDefinition = document.getElementById('word-definition');
        const answerInput = document.getElementById('answer-input');
        const currentWordIndicator = document.getElementById('current-word');
        const progressBar = document.getElementById('progress-bar');
        const progressText = document.getElementById('progress-text');
        const pronunciation = document.getElementById('pronunciation');
        const pronunciationText = document.getElementById('pronunciation-text');
        const playAudioBtn = document.getElementById('play-audio');
        
        const correctFeedback = document.getElementById('correct-feedback');
        const wrongFeedback = document.getElementById('wrong-feedback');
        const correctMessage = document.getElementById('correct-message');
        const wrongMessage = document.getElementById('wrong-message');
        const feedback = document.getElementById('feedback');
        
        const scoreDisplay = document.getElementById('score-display');
        const resultMessage = document.getElementById('result-message');
        const resultUnit = document.getElementById('result-unit');
        const resultsList = document.getElementById('results-list');
        const wrongCount = document.getElementById('wrong-count');
        const wrongListTitle = document.getElementById('wrong-list-title');
        const wrongList = document.getElementById('wrong-list');

        // 按钮
        const startBtn = document.getElementById('start-btn');
        const checkBtn = document.getElementById('check-btn');
        const hintBtn = document.getElementById('hint-btn');
        const skipBtn = document.getElementById('skip-btn');
        const restartBtn = document.getElementById('restart-btn');
        const backBtn = document.getElementById('back-btn');

        // 初始化
        function init() {
            // 生成单元选择按钮
            generateUnitButtons();
            document.getElementById('nav-back-btn').addEventListener('click', () => window.location.href = 'indexdaohang.html');
            document.getElementById('result-nav-back-btn').addEventListener('click', () => window.location.href = 'indexdaohang.html');
            // 设置事件监听器
            startBtn.addEventListener('click', startQuiz);
            checkBtn.addEventListener('click', checkAnswer);
            hintBtn.addEventListener('click', showHint);
            skipBtn.addEventListener('click', skipWord);
            restartBtn.addEventListener('click', restartQuiz);
            backBtn.addEventListener('click', showIntroCard);
            
            // 回车键提交答案
            answerInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    checkAnswer();
                }
            });
            
            // 播放发音按钮
            playAudioBtn.addEventListener('click', playPronunciation);
        }

        // 生成单元选择按钮
        function generateUnitButtons() {
            unitSelector.innerHTML = '';
            
            for (const [unitId, unitData] of Object.entries(wordUnits)) {
                const button = document.createElement('button');
                button.className = 'unit-btn';
                button.dataset.unit = unitId;
                button.innerHTML = `
                    <i class="fa fa-check-circle text-primary mr-2 opacity-0"></i>
                    ${unitData.title}
                `;
                
                button.addEventListener('click', () => {
                    // 重置所有按钮状态
                    document.querySelectorAll('.unit-btn').forEach(btn => {
                        btn.classList.remove('active');
                        btn.querySelector('i').classList.add('opacity-0');
                    });
                    
                    // 设置当前选中按钮状态
                    button.classList.add('active');
                    button.querySelector('i').classList.remove('opacity-0');
                    
                    // 设置当前单元
                    currentUnit = unitId;
                    startBtn.disabled = false;
                });
                
                unitSelector.appendChild(button);
            }
        }

        // 显示介绍卡片
        function showIntroCard() {
            introCard.classList.remove('hidden');
            quizCard.classList.add('hidden');
            resultCard.classList.add('hidden');
            
            // 重置进度条显示
            progressBar.style.width = '0%';
            progressText.textContent = '进度: 0/0';
        }

        // 显示练习卡片
        function showQuizCard() {
            introCard.classList.add('hidden');
            quizCard.classList.remove('hidden');
            resultCard.classList.add('hidden');
        }

        // 显示结果卡片
        function showResultCard() {
            introCard.classList.add('hidden');
            quizCard.classList.add('hidden');
            resultCard.classList.remove('hidden');
            
            // 重置进度条显示
            progressBar.style.width = '100%';
            progressText.textContent = `进度: ${currentWords.length}/${currentWords.length}`;
            
            updateResultCard();
        }

        // 开始测验
        function startQuiz() {
            if (!currentUnit) return;
            
            // 从选中的单元获取单词
            currentWords = [...wordUnits[currentUnit].words];
            // 打乱单词顺序
            shuffleArray(currentWords);
            // 初始化变量
            currentIndex = 0;
            score = 0;
            userAnswers = [];
            wrongAnswers = [];
            
            // 更新UI
            currentUnitTitle.textContent = wordUnits[currentUnit].title;
            updateQuizUI();
            showQuizCard();
        }

        // 更新测验UI
        function updateQuizUI() {
            if (currentIndex < currentWords.length) {
                const currentWord = currentWords[currentIndex];
                // 显示词性
                wordPartOfSpeech.innerHTML = `<span class="part-of-speech">${currentWord.partOfSpeech}</span>`;
                wordDefinition.textContent = currentWord.definition;
                answerInput.value = '';
                answerInput.focus();
                currentWordIndicator.textContent = `第 ${currentIndex + 1} 题 / 共 ${currentWords.length} 题`;
                
                // 更新进度
                const progress = ((currentIndex / currentWords.length) * 100);
                progressBar.style.width = `${progress}%`;
                progressText.textContent = `进度: ${currentIndex}/${currentWords.length}`;
                
                // 显示发音信息
                if (currentWord.pronunciation) {
                    pronunciationText.textContent = currentWord.pronunciation;
                    pronunciation.classList.remove('hidden');
                } else {
                    pronunciation.classList.add('hidden');
                }
                
                // 重置反馈
                feedback.classList.add('hidden');
                correctFeedback.classList.add('hidden');
                wrongFeedback.classList.add('hidden');
            } else {
                // 所有单词完成，显示结果
                showResultCard();
            }
        }

        // 检查答案
        function checkAnswer() {
            const userAnswer = answerInput.value.trim().toLowerCase();
            const correctAnswer = currentWords[currentIndex].word.toLowerCase();
            
            // 保存用户答案
            const isCorrect = userAnswer === correctAnswer;
            userAnswers.push({
                word: currentWords[currentIndex].word,
                partOfSpeech: currentWords[currentIndex].partOfSpeech,
                definition: currentWords[currentIndex].definition,
                userAnswer: userAnswer,
                isCorrect: isCorrect
            });
            
            // 如果错误，添加到错题集
            if (!isCorrect) {
                wrongAnswers.push({
                    word: currentWords[currentIndex].word,
                    partOfSpeech: currentWords[currentIndex].partOfSpeech,
                    definition: currentWords[currentIndex].definition,
                    userAnswer: userAnswer
                });
            }
            
            // 显示反馈
            feedback.classList.remove('hidden');
            
            if (isCorrect) {
                // 答案正确
                correctFeedback.classList.remove('hidden');
                wrongFeedback.classList.add('hidden');
                correctMessage.textContent = `正确答案是: ${currentWords[currentIndex].word} ${currentWords[currentIndex].partOfSpeech}`;
                score++;
                // 添加正确动画
                correctFeedback.classList.add('animate-pulse');
                setTimeout(() => {
                    correctFeedback.classList.remove('animate-pulse');
                }, 1000);
            } else {
                // 答案错误
                correctFeedback.classList.add('hidden');
                wrongFeedback.classList.remove('hidden');
                wrongMessage.textContent = `正确答案是: ${currentWords[currentIndex].word} ${currentWords[currentIndex].partOfSpeech}，你的答案: ${userAnswer || '未作答'}`;
            }
            
            // 禁用按钮防止重复提交
            checkBtn.disabled = true;
            hintBtn.disabled = true;
            
            // 2秒后自动进入下一个单词
            setTimeout(() => {
                currentIndex++;
                checkBtn.disabled = false;
                hintBtn.disabled = false;
                updateQuizUI();
            }, 2000);
        }

        // 显示提示
        function showHint() {
            const correctAnswer = currentWords[currentIndex].word;
            // 显示单词的前两个字母作为提示
            const hint = correctAnswer.substring(0, 2);
            answerInput.value = hint;
            answerInput.focus();
            answerInput.setSelectionRange(hint.length, hint.length);
        }

        // 跳过单词
        function skipWord() {
            // 记录为错误答案
            const skippedItem = {
                word: currentWords[currentIndex].word,
                partOfSpeech: currentWords[currentIndex].partOfSpeech,
                definition: currentWords[currentIndex].definition,
                userAnswer: '跳过',
                isCorrect: false
            };
            userAnswers.push(skippedItem);
            wrongAnswers.push(skippedItem);
            
            currentIndex++;
            updateQuizUI();
        }

        // 更新结果卡片
        function updateResultCard() {
            // 计算得分
            const percentage = Math.round((score / currentWords.length) * 100);
            scoreDisplay.textContent = percentage;
            
            // 设置结果消息
            let message = '';
            if (percentage >= 90) {
                message = '太棒了！你对这些单词掌握得非常好！';
            } else if (percentage >= 70) {
                message = '不错！继续努力，你会做得更好！';
            } else if (percentage >= 50) {
                message = '还可以，但需要更多练习来巩固这些单词。';
            } else {
                message = '加油！多花点时间记忆这些单词，你会进步的！';
            }
            resultMessage.textContent = message;
            resultUnit.textContent = `单元: ${wordUnits[currentUnit].title}`;
            
            // 显示错题数量
            wrongCount.textContent = `共 ${currentWords.length} 个单词，正确 ${score} 个，错误 ${wrongAnswers.length} 个`;
            
            // 显示所有单词的结果
            resultsList.innerHTML = '';
            userAnswers.forEach((item, index) => {
                const resultItem = document.createElement('div');
                resultItem.className = `p-3 rounded-lg ${item.isCorrect ? 'bg-green-50 border border-green-200' : 'bg-red-50 border border-red-200'}`;
                
                resultItem.innerHTML = `
                    <div class="font-medium">${index + 1}. ${item.definition}</div>
                    <div class="flex flex-wrap gap-x-4 mt-1 text-sm">
                        <div>正确答案: <span class="font-medium">${item.word}</span> <span class="part-of-speech">${item.partOfSpeech}</span></div>
                        <div>你的答案: <span class="font-medium">${item.userAnswer || '未作答'}</span></div>
                    </div>
                `;
                
                resultsList.appendChild(resultItem);
            });
            
            // 显示错题集
            if (wrongAnswers.length > 0) {
                wrongListTitle.classList.remove('hidden');
                wrongList.classList.remove('hidden');
                wrongList.innerHTML = '';
                
                wrongAnswers.forEach((item, index) => {
                    const wrongItem = document.createElement('div');
                    wrongItem.className = `p-3 rounded-lg bg-red-50 border border-red-200 wrong-item`;
                    
                    wrongItem.innerHTML = `
                        <div class="font-medium">${index + 1}. ${item.definition}</div>
                        <div class="mt-1 text-sm">
                            <div>正确答案: <span class="font-medium">${item.word}</span> <span class="part-of-speech">${item.partOfSpeech}</span></div>
                            ${item.userAnswer !== '跳过' ? `<div>你的答案: <span class="font-medium">${item.userAnswer}</span></div>` : ''}
                        </div>
                    `;
                    
                    wrongList.appendChild(wrongItem);
                });
            } else {
                wrongListTitle.classList.add('hidden');
                wrongList.classList.add('hidden');
            }
        }

        // 重新开始测验
        function restartQuiz() {
            currentIndex = 0;
            score = 0;
            userAnswers = [];
            wrongAnswers = [];
            updateQuizUI();
            showQuizCard();
        }

        // 播放单词发音（使用Web Speech API）
        function playPronunciation() {
            const word = currentWords[currentIndex].word;
            
            // 检查浏览器是否支持语音合成
            if ('speechSynthesis' in window) {
                // 停止任何正在播放的语音
                window.speechSynthesis.cancel();
                
                // 创建新的语音实例
                const utterance = new SpeechSynthesisUtterance(word);
                utterance.lang = 'en-US'; // 使用美式英语发音
                utterance.rate = 0.9; // 语速稍慢
                
                // 播放语音
                window.speechSynthesis.speak(utterance);
            } else {
                alert('抱歉，你的浏览器不支持语音播放功能。');
            }
        }

        // 打乱数组顺序（Fisher-Yates算法）
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>