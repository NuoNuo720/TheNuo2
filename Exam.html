<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>学业水平考试试卷中心</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    
    <!-- 配置Tailwind自定义颜色和字体 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3b82f6',
                        secondary: '#10b981',
                        accent: '#f59e0b',
                        danger: '#ef4444',
                        dark: '#1e293b',
                        light: '#f8fafc'
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .exam-card {
                @apply bg-white rounded-xl shadow-md overflow-hidden transition-all duration-300 hover:shadow-xl hover:-translate-y-1;
            }
            .subject-badge {
                @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
            }
            .fade-in {
                animation: fadeIn 0.6s ease-in-out forwards;
            }
            .slide-up {
                animation: slideUp 0.5s ease-out forwards;
            }
            .pulse {
                animation: pulse 2s infinite;
            }
            .scale-hover {
                @apply transition-transform duration-300 hover:scale-105;
            }
            .search-result {
                @apply absolute top-full left-0 right-0 mt-1 bg-white shadow-lg rounded-lg overflow-hidden z-50 max-h-60 overflow-y-auto;
            }
            .filter-active {
                @apply bg-primary text-white;
            }
            .filter-inactive {
                @apply bg-gray-200 hover:bg-gray-300;
            }
            .filter-tag {
                @apply inline-flex items-center px-3 py-1 rounded-full text-sm bg-primary/10 text-primary mr-2 mb-2 transition-all duration-200 hover:bg-primary/20;
            }
            .filter-clear {
                @apply ml-1 cursor-pointer hover:text-primary/80;
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideUp {
            from { 
                opacity: 0;
                transform: translateY(20px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen font-sans text-dark">
    <!-- 顶部导航栏 -->
    <header class="bg-white shadow-sm sticky top-0 z-50 transition-all duration-300" id="main-header">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center py-4">
                <!-- 返回按钮 -->
                <button id="back-btn" class="mr-2 text-gray-600 hover:text-primary transition-colors flex items-center scale-hover">
                    <i class="fa fa-arrow-left mr-1"></i>
                    <span class="hidden sm:inline">返回</span>
                </button>
                
                <div class="flex items-center space-x-2 flex-grow">
                    <i class="fa fa-graduation-cap text-primary text-2xl transition-transform duration-300 hover:rotate-12"></i>
                    <h1 class="text-xl md:text-2xl font-bold text-dark">学业水平考试中心</h1>
                </div>
                
                <div class="flex items-center space-x-3">
                    <button class="hidden md:block bg-primary/10 text-primary px-4 py-2 rounded-lg hover:bg-primary/20 transition-all duration-300 transform hover:scale-105">
                        <i class="fa fa-user-circle mr-1"></i> 登录
                    </button>
                    <button class="md:hidden text-gray-600 text-xl hover:text-primary transition-colors scale-hover" id="mobile-menu-btn">
                        <i class="fa fa-bars"></i>
                    </button>
                </div>
            </div>
            
            <!-- 移动端菜单 -->
            <div class="md:hidden hidden bg-white border-t animate-fadeIn" id="mobile-menu">
                <div class="flex flex-col py-3 space-y-3">
                    <a href="#" class="text-primary font-medium px-2 py-1 rounded hover:bg-primary/5 transition-colors duration-200">首页</a>
                    <a href="#" class="text-gray-600 px-2 py-1 rounded hover:bg-primary/5 hover:text-primary transition-colors duration-200">试卷库</a>
                    <a href="#" class="text-gray-600 px-2 py-1 rounded hover:bg-primary/5 hover:text-primary transition-colors duration-200">成绩查询</a>
                    <a href="#" class="text-gray-600 px-2 py-1 rounded hover:bg-primary/5 hover:text-primary transition-colors duration-200">学习资源</a>
                    <a href="#" class="text-gray-600 px-2 py-1 rounded hover:bg-primary/5 hover:text-primary transition-colors duration-200">
                        <i class="fa fa-user-circle mr-1"></i> 登录
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- 英雄区域 -->
    <section class="bg-gradient-to-r from-blue-600 to-indigo-700 text-white py-12 md:py-20 relative overflow-hidden">
        <!-- 背景装饰元素 -->
        <div class="absolute top-0 left-0 w-full h-full overflow-hidden opacity-10">
            <div class="absolute -top-10 -left-10 w-40 h-40 rounded-full bg-white"></div>
            <div class="absolute top-40 right-20 w-60 h-60 rounded-full bg-white"></div>
            <div class="absolute bottom-10 left-1/3 w-20 h-20 rounded-full bg-white"></div>
        </div>
        
        <div class="container mx-auto px-4 relative z-10">
            <div class="max-w-3xl slide-up" style="opacity:0; animation-delay:0.2s">
                <h2 class="text-3xl md:text-4xl lg:text-5xl font-bold mb-4">提升学业水平，<br>从这里开始</h2>
                <p class="text-blue-100 text-lg mb-8">精心设计的学业水平测试，帮助你了解学习状况，针对性提升</p>
                
                <!-- 搜索框区域（带搜索建议） -->
                <div class="flex flex-wrap gap-4">
                    <div class="relative flex-grow max-w-md group">
                        <input type="text" placeholder="搜索试卷、知识点、题型..." 
                               class="w-full px-4 py-3 pl-10 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 text-gray-800 transition-all duration-300 group-hover:shadow-lg"
                               id="search-input">
                        <i class="fa fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 group-hover:text-primary transition-colors"></i>
                        
                        <!-- 搜索建议下拉框 -->
                        <div id="search-suggestions" class="search-result hidden">
                            <div class="p-3 border-b border-gray-100 hover:bg-gray-50 cursor-pointer transition-colors">
                                <div class="font-medium">高二第1~2周学业水平考试（物化生）</div>
                                <div class="text-xs text-gray-500">物理5题 · 化学5题 · 生物5题</div>
                            </div>
                            <div class="p-3 border-b border-gray-100 hover:bg-gray-50 cursor-pointer transition-colors">
                                <div class="font-medium">物理 - 运动学知识点</div>
                                <div class="text-xs text-gray-500">相关试卷：3份</div>
                            </div>
                            <div class="p-3 border-b border-gray-100 hover:bg-gray-50 cursor-pointer transition-colors">
                                <div class="font-medium">化学 - 物质的量计算</div>
                                <div class="text-xs text-gray-500">相关试卷：2份</div>
                            </div>
                            <div class="p-3 hover:bg-gray-50 cursor-pointer transition-colors">
                                <div class="font-medium">生物 - 细胞结构</div>
                                <div class="text-xs text-gray-500">相关试卷：4份</div>
                            </div>
                        </div>
                    </div>
                    <button class="bg-white text-blue-600 px-6 py-3 rounded-lg font-medium hover:bg-blue-50 transition-all duration-300 transform hover:scale-105 hover:shadow-lg flex items-center">
                        开始测试 <i class="fa fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- 主内容区 -->
    <main class="container mx-auto px-4 py-12">
        <!-- 筛选和分类 -->
        <div class="mb-10">
            <div class="flex flex-wrap justify-between items-center mb-6">
                <h2 class="text-2xl font-bold slide-up" style="opacity:0; animation-delay:0.1s">试卷列表</h2>
                
                <div class="flex flex-wrap gap-2 mt-4 sm:mt-0 slide-up" style="opacity:0; animation-delay:0.3s">
                    <button class="filter-btn filter-active px-4 py-2 rounded-lg text-sm transition-all duration-300 transform hover:scale-105" data-filter="all" data-name="全部试卷">
                        全部试卷
                    </button>
                    <button class="filter-btn filter-inactive px-4 py-2 rounded-lg text-sm transition-all duration-300 transform hover:scale-105" data-filter="physics" data-name="物理">
                        物理
                    </button>
                    <button class="filter-btn filter-inactive px-4 py-2 rounded-lg text-sm transition-all duration-300 transform hover:scale-105" data-filter="chemistry" data-name="化学">
                        化学
                    </button>
                    <button class="filter-btn filter-inactive px-4 py-2 rounded-lg text-sm transition-all duration-300 transform hover:scale-105" data-filter="biology" data-name="生物">
                        生物
                    </button>
                    <button class="filter-btn filter-inactive px-4 py-2 rounded-lg text-sm transition-all duration-300 transform hover:scale-105" data-filter="comprehensive" data-name="综合">
                        综合
                    </button>
                </div>
            </div>
            
            <!-- 活跃筛选标签 -->
            <div id="active-filters" class="flex flex-wrap mb-4 hidden">
                <div class="text-sm text-gray-600 mr-2 mt-1">已选条件：</div>
                <!-- 筛选标签将通过JS动态添加 -->
            </div>
            
            <!-- 简化的筛选区 -->
            <div class="bg-white rounded-xl shadow-sm mb-8 slide-up" style="opacity:0; animation-delay:0.5s">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 p-4">
                    <div class="flex items-center">
                        <label class="text-gray-600 mr-2">年级:</label>
                        <select class="border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary/50 transition-all duration-300 w-full" id="grade-filter" data-name="年级">
                            <option value="all">全部年级</option>
                            <option value="10">高一</option>
                            <option value="11" selected>高二</option>
                            <option value="12">高三</option>
                        </select>
                    </div>
                    
                    <div class="flex items-center">
                        <label class="text-gray-600 mr-2">难度:</label>
                        <select class="border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary/50 transition-all duration-300 w-full" id="difficulty-filter" data-name="难度">
                            <option value="all">全部难度</option>
                            <option value="easy">基础</option>
                            <option value="medium" selected>中等</option>
                            <option value="hard">提高</option>
                        </select>
                    </div>
                    
                    <div class="flex items-center">
                        <label class="text-gray-600 mr-2">试卷类型:</label>
                        <select class="border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary/50 transition-all duration-300 w-full" id="paper-type-filter" data-name="试卷类型">
                            <option value="all" selected>全部类型</option>
                            <option value="weekly">周测</option>
                            <option value="monthly">月考</option>
                            <option value="midterm">期中</option>
                            <option value="final">期末</option>
                        </select>
                    </div>
                </div>
                
                <!-- 筛选结果统计和操作按钮 -->
                <div class="flex flex-wrap justify-between items-center p-4 pt-0 border-t border-gray-100">
                    <div class="text-sm text-gray-500 mb-3 sm:mb-0">
                        <span id="filter-count">找到 1 份符合条件的试卷</span>
                    </div>
                    <div class="flex gap-3">
                        <button id="reset-filters" class="text-gray-600 hover:text-gray-800 text-sm transition-colors flex items-center border border-gray-300 px-4 py-2 rounded-lg hover:bg-gray-50">
                            <i class="fa fa-refresh mr-1"></i> 重置
                        </button>
                        <button id="apply-filters" class="bg-primary text-white text-sm transition-colors flex items-center px-4 py-2 rounded-lg hover:bg-primary/90">
                            <i class="fa fa-filter mr-1"></i> 筛选
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- 试卷网格 -->
            <div class="grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 justify-items-center">
                <!-- 高二第1~2周学业水平考试(物化生) -->
                <a href="高二第1~2周学业水平考试.html" class="exam-card group slide-up max-w-lg w-full" data-exam-id="1" 
                   data-subject="comprehensive" data-grade="11" data-difficulty="medium" 
                   data-paper-type="weekly" data-keywords="高二,学业水平,物理,化学,生物,周测">
                    <div class="h-48 bg-gradient-to-r from-purple-600 to-indigo-600 relative overflow-hidden">
                        <div class="absolute inset-0 bg-black/20 flex items-center justify-center">
                            <i class="fa fa-flask text-white text-6xl transform group-hover:scale-110 transition-transform duration-500"></i>
                        </div>
                        <div class="absolute top-3 right-3">
                            <span class="subject-badge bg-white/90 text-purple-700 pulse">
                                最新
                            </span>
                        </div>
                        <!-- 装饰元素 -->
                        <div class="absolute -bottom-10 -right-10 w-32 h-32 rounded-full bg-white/10"></div>
                        <div class="absolute top-5 left-5 w-10 h-10 rounded-full bg-white/10"></div>
                    </div>
                    <div class="p-6">
                        <div class="flex justify-between items-start mb-4">
                            <h3 class="font-bold text-xl group-hover:text-primary transition-colors">高二第1~2周学业水平考试（物化生）</h3>
                            <span class="text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded-full">20题</span>
                        </div>
                        <p class="text-gray-600 mb-5">覆盖开学前两周学习内容，包含物理、化学、生物三个学科的15道综合测试题，全面检测学习成果。</p>
                        <div class="flex flex-wrap gap-3 mb-5">
                            <span class="text-xs bg-blue-100 text-blue-800 px-3 py-1 rounded-full">物理5题</span>
                            <span class="text-xs bg-red-100 text-red-800 px-3 py-1 rounded-full">化学5题</span>
                            <span class="text-xs bg-green-100 text-green-800 px-3 py-1 rounded-full">生物5题</span>
                            <span class="text-xs bg-purple-100 text-purple-800 px-3 py-1 rounded-full">周测</span>
                        </div>
                        <div class="flex justify-between items-center text-sm text-gray-500 mb-5">
                            <div class="flex items-center">
                                <i class="fa fa-clock-o mr-1 text-primary"></i> 12分钟
                            </div>
                            <div class="flex items-center">
                                <i class="fa fa-calendar mr-1 text-primary"></i> 2025-09-12
                            </div>
                            <div class="flex items-center">
                                <i class="fa fa-signal mr-1 text-primary"></i> 中等难度
                            </div>
                        </div>
                        <button class="w-full bg-primary hover:bg-primary/90 text-white font-medium py-3 px-6 rounded-lg transition-all duration-300 transform hover:scale-[1.02] flex items-center justify-center">
                            <i class="fa fa-play-circle mr-2"></i> 开始考试
                        </button>
                    </div>
                </a>
            </div>
        </div>
    </main>

    <!-- 精简的平台数据 -->
    <section class="bg-gray-100 py-8">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-2 md:grid-cols-3 gap-6 text-center">
                <div class="bg-white p-4 rounded-xl shadow-sm transform transition-all duration-500 hover:shadow-lg hover:scale-105">
                    <div class="text-3xl font-bold text-primary mb-1 counter" data-target="1">0</div>
                    <div class="text-gray-600 text-sm">物化生试卷</div>
                </div>
                <div class="bg-white p-4 rounded-xl shadow-sm transform transition-all duration-500 hover:shadow-lg hover:scale-105">
                    <div class="text-3xl font-bold text-primary mb-1 counter" data-target="15">0</div>
                    <div class="text-gray-600 text-sm">试题总量</div>
                </div>
                <div class="bg-white p-4 rounded-xl shadow-sm transform transition-all duration-500 hover:shadow-lg hover:scale-105">
                    <div class="text-3xl font-bold text-primary mb-1 counter" data-target="100">0</div>
                    <div class="text-gray-600 text-sm">用户满意度</div>
                </div>
            </div>
        </div>
    </section>

    <!-- 简化的页脚 -->
    <footer class="bg-dark text-white pt-8 pb-4">
        <div class="container mx-auto px-4">
            <div class="text-center text-gray-500 text-sm">
                <p>© 2023 学业水平考试中心 版权所有</p>
            </div>
        </div>
    </footer>

    <script>
        // 页面加载完成后执行
        document.addEventListener('DOMContentLoaded', function() {
            // 获取DOM元素
            const backBtn = document.getElementById('back-btn');
            const header = document.getElementById('main-header');
            const mobileMenuBtn = document.getElementById('mobile-menu-btn');
            const mobileMenu = document.getElementById('mobile-menu');
            const searchInput = document.getElementById('search-input');
            const searchSuggestions = document.getElementById('search-suggestions');
            const filterBtns = document.querySelectorAll('.filter-btn');
            const resetFiltersBtn = document.getElementById('reset-filters');
            const applyFiltersBtn = document.getElementById('apply-filters');
            const filterCount = document.getElementById('filter-count');
            const examCards = document.querySelectorAll('.exam-card');
            const activeFiltersContainer = document.getElementById('active-filters');
            
            // 获取所有筛选下拉框（仅保留核心筛选条件）
            const filterSelects = {
                grade: document.getElementById('grade-filter'),
                difficulty: document.getElementById('difficulty-filter'),
                paperType: document.getElementById('paper-type-filter')
            };
            
            // 存储筛选条件的显示名称映射
            const filterValueNames = {
                grade: { '10': '高一', '11': '高二', '12': '高三', 'all': '全部年级' },
                difficulty: { 'easy': '基础', 'medium': '中等', 'hard': '提高', 'all': '全部难度' },
                paperType: { 'weekly': '周测', 'monthly': '月考', 'midterm': '期中', 'final': '期末', 'all': '全部类型' }
            };
            
            // 初始化筛选标签
            updateActiveFilterTags();
            
            //按钮功能
            backBtn.addEventListener('click', function() {
                // 直接跳转到指定页面，替换为你的目标页面URL
                window.location.href = 'indexdaohang.html';
    
                // 添加点击反馈动画
                this.classList.add('bg-primary/10');
                setTimeout(() => {
                    this.classList.remove('bg-primary/10');
                }, 300);
            });
            
            // 导航栏滚动效果
            window.addEventListener('scroll', function() {
                if (window.scrollY > 50) {
                    header.classList.add('py-2', 'shadow');
                    header.classList.remove('py-4');
                } else {
                    header.classList.add('py-4');
                    header.classList.remove('py-2', 'shadow');
                }
            });
            
            // 移动端菜单切换
            mobileMenuBtn.addEventListener('click', function() {
                mobileMenu.classList.toggle('hidden');
                mobileMenu.classList.toggle('fade-in');
                
                // 图标切换动画
                const icon = mobileMenuBtn.querySelector('i');
                icon.classList.add('scale-0');
                setTimeout(() => {
                    if (icon.classList.contains('fa-bars')) {
                        icon.classList.remove('fa-bars');
                        icon.classList.add('fa-times');
                    } else {
                        icon.classList.remove('fa-times');
                        icon.classList.add('fa-bars');
                    }
                    icon.classList.remove('scale-0');
                }, 150);
            });
            
            // 高级搜索功能
            searchInput.addEventListener('focus', function() {
                searchSuggestions.classList.remove('hidden');
            });
            
            searchInput.addEventListener('blur', function() {
                setTimeout(() => {
                    searchSuggestions.classList.add('hidden');
                }, 200);
            });
            
            // 搜索建议项点击处理
            document.querySelectorAll('#search-suggestions > div').forEach(item => {
                item.addEventListener('click', function() {
                    searchInput.value = this.querySelector('.font-medium').textContent;
                    searchSuggestions.classList.add('hidden');
                    
                    // 执行搜索
                    performSearch();
                    
                    // 如果点击的是试卷项，直接跳转
                    if (this.querySelector('.font-medium').textContent.includes('学业水平考试')) {
                        window.location.href = '高二第1~2周学业水平考试.html';
                    }
                });
            });
            
            // 实时搜索处理
            searchInput.addEventListener('input', performSearch);
            
            // 执行搜索的函数
            function performSearch() {
                const searchTerm = searchInput.value.toLowerCase().trim();
                
                if (searchTerm.length > 0) {
                    searchSuggestions.classList.remove('hidden');
                    
                    // 筛选搜索建议
                    document.querySelectorAll('#search-suggestions > div').forEach(item => {
                        const text = item.textContent.toLowerCase();
                        if (text.includes(searchTerm)) {
                            item.style.display = 'block';
                        } else {
                            item.style.display = 'none';
                        }
                    });
                } else {
                    // 搜索内容为空时显示所有建议
                    document.querySelectorAll('#search-suggestions > div').forEach(item => {
                        item.style.display = 'block';
                    });
                }
                
                // 更新搜索筛选标签
                updateActiveFilterTags();
                
                // 应用搜索过滤到试卷
                applyFilters();
            }
            
            // 学科筛选按钮交互
            filterBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    // 更新按钮状态
                    filterBtns.forEach(b => {
                        b.classList.remove('filter-active');
                        b.classList.add('filter-inactive');
                    });
                    this.classList.remove('filter-inactive');
                    this.classList.add('filter-active');
                    
                    // 更新筛选标签
                    updateActiveFilterTags();
                    
                    // 应用筛选
                    applyFilters();
                });
            });
            
            // 筛选下拉框变化事件
            Object.values(filterSelects).forEach(select => {
                select.addEventListener('change', function() {
                    // 显示活跃筛选标签区域
                    activeFiltersContainer.classList.remove('hidden');
                });
            });
            
            // 应用筛选按钮
            applyFiltersBtn.addEventListener('click', function() {
                // 按钮反馈动画
                this.classList.add('bg-primary/80');
                setTimeout(() => {
                    this.classList.remove('bg-primary/80');
                }, 200);
                
                // 更新筛选标签
                updateActiveFilterTags();
                
                // 应用筛选
                applyFilters();
            });
            
            // 重置筛选条件
            resetFiltersBtn.addEventListener('click', function() {
                // 重置按钮状态
                filterBtns.forEach((btn, index) => {
                    btn.classList.remove('filter-active', 'filter-inactive');
                    if (index === 0) { // 第一个按钮是"全部试卷"
                        btn.classList.add('filter-active');
                    } else {
                        btn.classList.add('filter-inactive');
                    }
                });
                
                // 重置下拉框
                filterSelects.grade.value = '11'; // 默认高二
                filterSelects.difficulty.value = 'medium'; // 默认中等
                filterSelects.paperType.value = 'all'; // 默认全部类型
                
                // 清空搜索框
                searchInput.value = '';
                searchSuggestions.classList.add('hidden');
                
                // 更新筛选标签
                updateActiveFilterTags();
                
                // 应用筛选
                applyFilters();
                
                // 按钮反馈动画
                this.classList.add('bg-gray-100');
                setTimeout(() => {
                    this.classList.remove('bg-gray-100');
                }, 300);
            });
            
            // 更新活跃筛选标签
            function updateActiveFilterTags() {
                // 清空现有标签
                const tagContainer = activeFiltersContainer;
                // 保留"已选条件"文本
                const labelElement = tagContainer.querySelector('.text-gray-600');
                
                // 清空容器并重新添加标签
                tagContainer.innerHTML = '';
                if (labelElement) {
                    tagContainer.appendChild(labelElement);
                }
                
                // 获取当前筛选条件
                const activeFilterBtn = document.querySelector('.filter-btn.filter-active');
                const subjectFilter = activeFilterBtn ? activeFilterBtn.getAttribute('data-filter') : 'all';
                const subjectName = activeFilterBtn ? activeFilterBtn.getAttribute('data-name') : '全部试卷';
                
                // 收集所有非默认筛选条件
                const activeFilters = [];
                
                // 添加学科筛选标签（如果不是"全部试卷"）
                if (subjectFilter !== 'all') {
                    activeFilters.push({
                        type: 'subject',
                        value: subjectFilter,
                        name: subjectName
                    });
                }
                
                // 添加下拉框筛选条件
                Object.keys(filterSelects).forEach(key => {
                    const select = filterSelects[key];
                    const value = select.value;
                    const defaultValues = {
                        grade: '11',
                        difficulty: 'medium'
                    };
                    const isDefault = defaultValues[key] ? (value === defaultValues[key]) : (value === 'all');
                    
                    if (!isDefault) {
                        activeFilters.push({
                            type: key,
                            value: value,
                            name: `${select.getAttribute('data-name')}: ${filterValueNames[key][value] || value}`
                        });
                    }
                });
                
                // 添加搜索关键词标签
                const searchTerm = searchInput.value.trim();
                if (searchTerm) {
                    activeFilters.push({
                        type: 'search',
                        value: searchTerm,
                        name: `搜索: ${searchTerm}`
                    });
                }
                
                // 创建筛选标签
                activeFilters.forEach(filter => {
                    const tag = document.createElement('div');
                    tag.className = 'filter-tag';
                    tag.innerHTML = `
                        ${filter.name}
                        <i class="fa fa-times filter-clear" data-type="${filter.type}" data-value="${filter.value}"></i>
                    `;
                    tagContainer.appendChild(tag);
                    
                    // 添加标签删除事件
                    const clearBtn = tag.querySelector('.filter-clear');
                    clearBtn.addEventListener('click', function() {
                        const type = this.getAttribute('data-type');
                        const value = this.getAttribute('data-value');
                        
                        // 根据类型清除相应的筛选条件
                        if (type === 'subject') {
                            // 重置学科筛选为全部
                            filterBtns.forEach((btn, index) => {
                                btn.classList.remove('filter-active', 'filter-inactive');
                                if (index === 0) { // 第一个按钮是"全部试卷"
                                    btn.classList.add('filter-active');
                                } else {
                                    btn.classList.add('filter-inactive');
                                }
                            });
                        } else if (type === 'search') {
                            // 清除搜索框
                            searchInput.value = '';
                            searchSuggestions.classList.add('hidden');
                        } else if (filterSelects[type]) {
                            // 重置对应下拉框
                            const defaultValues = {
                                grade: '11',
                                difficulty: 'medium'
                            };
                            filterSelects[type].value = defaultValues[type] || 'all';
                        }
                        
                        // 更新标签和筛选结果
                        updateActiveFilterTags();
                        applyFilters();
                    });
                });
                
                // 如果没有活跃筛选条件，隐藏标签容器
                if (activeFilters.length === 0) {
                    tagContainer.classList.add('hidden');
                } else {
                    tagContainer.classList.remove('hidden');
                }
            }
            
            // 应用所有筛选条件（优化筛选准确性）
            function applyFilters() {
                // 获取当前筛选条件
                const activeFilterBtn = document.querySelector('.filter-btn.filter-active');
                const subjectFilter = activeFilterBtn ? activeFilterBtn.getAttribute('data-filter') : 'all';
                const gradeFilter = filterSelects.grade.value;
                const difficultyFilter = filterSelects.difficulty.value;
                const paperTypeFilter = filterSelects.paperType.value;
                const searchTerm = searchInput.value.toLowerCase().trim();
                
                let visibleCount = 0;
                
                // 对每个试卷应用筛选
                examCards.forEach(card => {
                    // 获取试卷属性
                    const cardSubject = card.getAttribute('data-subject');
                    const cardGrade = card.getAttribute('data-grade');
                    const cardDifficulty = card.getAttribute('data-difficulty');
                    const cardPaperType = card.getAttribute('data-paper-type');
                    const cardKeywords = card.getAttribute('data-keywords').toLowerCase();
                    const cardTitle = card.querySelector('h3').textContent.toLowerCase();
                    const cardDesc = card.querySelector('p').textContent.toLowerCase();
                    
                    // 精确匹配筛选条件
                    let isVisible = true;
                    
                    // 学科筛选
                    if (subjectFilter !== 'all' && cardSubject !== subjectFilter) {
                        isVisible = false;
                    }
                    
                    // 年级筛选
                    if (gradeFilter !== 'all' && cardGrade !== gradeFilter) {
                        isVisible = false;
                    }
                    
                    // 难度筛选
                    if (difficultyFilter !== 'all' && cardDifficulty !== difficultyFilter) {
                        isVisible = false;
                    }
                    
                    // 试卷类型筛选
                    if (paperTypeFilter !== 'all' && cardPaperType !== paperTypeFilter) {
                        isVisible = false;
                    }
                    
                    // 搜索筛选（匹配标题、描述或关键词）
                    if (searchTerm && !(cardTitle.includes(searchTerm) || 
                                      cardDesc.includes(searchTerm) ||
                                      cardKeywords.includes(searchTerm))) {
                        isVisible = false;
                    }
                    
                    // 应用显示/隐藏动画
                    if (isVisible) {
                        card.style.opacity = '1';
                        card.style.transform = 'scale(1)';
                        card.style.pointerEvents = 'auto';
                        visibleCount++;
                    } else {
                        card.style.opacity = '0.5';
                        card.style.transform = 'scale(0.95)';
                        card.style.pointerEvents = 'none';
                    }
                });
                
                // 更新筛选结果计数
                filterCount.textContent = `找到 ${visibleCount} 份符合条件的试卷`;
            }
            
            // 数字计数动画
            const counters = document.querySelectorAll('.counter');
            const speed = 200;
            
            const animateCounters = () => {
                counters.forEach(counter => {
                    const target = +counter.getAttribute('data-target');
                    const count = +counter.innerText;
                    const inc = target / speed;
                    
                    if (count < target) {
                        counter.innerText = Math.ceil(count + inc);
                        setTimeout(animateCounters, 1);
                    } else {
                        counter.innerText = target + (target === 98 ? '%' : '+');
                    }
                });
            };
            
            // 当统计区域进入视图时启动计数动画
            const statsSection = document.querySelector('.bg-gray-100.py-8');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        animateCounters();
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.5 });
            
            observer.observe(statsSection);
            
            // 初始化应用筛选
            applyFilters();
        });
    </script>
</body>
</html>